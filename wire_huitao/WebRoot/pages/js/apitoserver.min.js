var API={ajaxPost:function(url,data,success,error){$.ajax({type:'POST',url:url,data:data,success:success,error:error,dataType:'json'})},base:function(url,params,callFunc){API.ajaxPost(url,params,function(resp){var result={success:true,data:resp};callFunc(result)},function(request){var msg;switch(request.status){case 404:msg="未找到,请联系管理员";break;case 500:msg="服务器错误,请联系管理员";break;default:msg="请求出错,请退出后重新登录"}var result={success:false,msg:msg};callFunc(result)})}};var serverAPI={getUserInfo:function(params,resultFun){var userInfo=window.sessionStorage.getItem('userInfo');if(userInfo!=undefined&&userInfo!=null&&userInfo!="undefined"&&userInfo!=""&&userInfo!="null"){;resultFun(userInfo)}else{API.base('/sys/user!findUserInfo.action',params,function(rsp){if(rsp.data!=undefined&&rsp.data.userInfo!=undefined){var userInfo=JSON.stringify(rsp.data.userInfo);window.sessionStorage.setItem('userInfo',userInfo);resultFun(userInfo)}else{if(rsp.msg!=undefined){common.errorhandler(rsp.msg)}}})}},getUserInfoClient:function(params,resultFun){var userInfo=window.sessionStorage.getItem('userInfo');if(userInfo!=undefined&&userInfo!=null&&userInfo!="undefined"&&userInfo!=""&&userInfo!="null"){resultFun(userInfo);console.log('11111111-------')}else{API.base('/login/user!findUserInfo.action',params,function(rsp){if(rsp.data!=undefined&&rsp.data.userInfo!=undefined){var userInfo=JSON.stringify(rsp.data.userInfo);window.sessionStorage.setItem('userInfo',userInfo);resultFun(userInfo)}else{if(rsp.msg!=undefined){console.log(rsp.msg)}}})}}};